<section id="contacto">
   <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div
         class="space-y-1 flex flex-col items-center mb-15"
         data-aos="fade-down"
         data-aos-duration="1000"
      >
         <h1 class="text-3xl font-semibold text-[#902727]">Contacto</h1>
         <div class="w-12 h-1 bg-[#902727] rounded-full"></div>
      </div>
      <div class="grid lg:grid-cols-2 grid-cols-1 gap-0 md:gap-5">
         <div
            class="lg:mb-0 mb-10"
            data-aos="fade-right"
            data-aos-duration="1000"
         >
            <div class="group w-full h-full">
               <div class="relative h-full">
                  <img
                     src="/bg-3.avif"
                     alt="ContactUs tailwind section"
                     class="w-full h-full lg:rounded-l-sm rounded-sm bg-blend-multiply bg-[#902727] object-cover"
                  />
                  <div class="absolute bottom-0 w-full lg:p-11 p-5">
                     <div class="bg-white rounded-sm p-6 block">
                        <a
                           class="flex items-center mb-6 group transition-all duration-300 hover:translate-x-2"
                        >
                           <i
                              class="fa-solid fa-phone text-[#902727] text-xl group-hover:scale-110 transition-all duration-300"
                              data-aos="zoom-in"
                              data-aos-delay="100"></i>
                           <div class="flex flex-col">
                              <h5
                                 class="text-black text-base font-normal leading-6 ml-5 group-hover:text-[#902727] transition-all duration-300"
                              >
                                 (0223) 15-532-2443
                              </h5>
                              <h5
                                 class="text-black text-base font-normal leading-6 ml-5 group-hover:text-[#902727] transition-all duration-300"
                              >
                                 (0223) 15-564-6847
                              </h5>
                           </div>
                        </a>
                        <a
                           href="mailto:toledomorenoyasoc@habilitacionesmardelplata.com"
                           class="flex items-center mb-6 group transition-all duration-300 hover:translate-x-2"
                        >
                           <i
                              class="fa-solid fa-envelope text-[#902727] text-xl group-hover:scale-110 transition-all duration-300"
                              data-aos="zoom-in"
                              data-aos-delay="200"></i>
                           <h5
                              class="text-black text-base font-normal leading-6 ml-5 group-hover:text-[#902727] transition-all duration-300 overflow-auto"
                           >
                              toledomorenoyasoc@habilitacionesmardelplata.com
                           </h5>
                        </a>
                        <a
                           href="https://maps.google.com/?q=CORDOBA+1882,+PISO+4,+OFICINA+42,+Mar+del+plata"
                           target="_blank"
                           class="flex items-center group transition-all duration-300 hover:translate-x-2"
                        >
                           <i
                              class="fa-solid fa-location-dot text-[#902727] text-xl group-hover:scale-110 transition-all duration-300"
                              data-aos="zoom-in"
                              data-aos-delay="300"></i>
                           <h5
                              class="text-black text-base font-normal leading-6 ml-5 group-hover:text-[#902727] transition-all duration-300"
                           >
                              CORDOBA 1882, PISO 4, OFICINA 42, Mar del plata.
                           </h5>
                        </a>
                     </div>
                  </div>
               </div>
            </div>
         </div>

         <div
            class="bg-gray-50 p-5 lg:p-11 lg:rounded-r-2xl rounded-sm"
            data-aos="fade-left"
            data-aos-duration="1000"
         >
            <form id="contactForm" class="flex flex-col gap-4">
               <div class="relative">
                  <input
                     type="text"
                     name="name"
                     class="w-full h-12 text-gray-600 placeholder-gray-400 shadow-sm bg-transparent text-lg font-normal leading-7 rounded-sm border border-gray-200 focus:outline-none focus:border-[#902727] pl-4 mb-2 transition-all duration-300"
                     placeholder="Nombre"
                     required
                  />
                  <div class="error-message text-red-500 text-sm mb-6 hidden"></div>
               </div>

               <div class="relative">
                  <input
                     type="email"
                     name="email"
                     class="w-full h-12 text-gray-600 placeholder-gray-400 shadow-sm bg-transparent text-lg font-normal leading-7 rounded-sm border border-gray-200 focus:outline-none focus:border-[#902727] pl-4 mb-2 transition-all duration-300"
                     placeholder="Email"
                     required
                  />
                  <div class="error-message text-red-500 text-sm mb-6 hidden"></div>
               </div>

               <div class="relative">
                  <input
                     type="tel"
                     name="phone"
                     class="w-full h-12 text-gray-600 placeholder-gray-400 shadow-sm bg-transparent text-lg font-normal leading-7 rounded-sm border border-gray-200 focus:outline-none focus:border-[#902727] pl-4 mb-2 transition-all duration-300"
                     placeholder="Teléfono"
                     required
                  />
                  <div class="error-message text-red-500 text-sm mb-6 hidden"></div>
               </div>

               <div class="mb-2">
                  <h4 class="text-gray-500 text-lg font-normal leading-7 mb-4">
                     Método preferido de comunicación
                  </h4>
                  <div class="flex">
                     <div class="flex items-center mr-11">
                        <input
                           id="radio-email"
                           type="radio"
                           name="preferred_method"
                           value="Email"
                           class="appearance-none w-5 h-5 border-2 border-[#902727] rounded-sm checked:bg-[#902727] checked:border-[#902727] relative cursor-pointer"
                           required
                        />
                        <label
                           for="radio-email"
                           class="flex items-center cursor-pointer text-gray-500 text-base font-normal leading-6 ml-2"
                        >
                           Email
                        </label>
                     </div>
                     <div class="flex items-center">
                        <input
                           id="radio-phone"
                           type="radio"
                           name="preferred_method"
                           value="Telefono"
                           class="appearance-none w-5 h-5 border-2 border-[#902727] rounded-sm checked:bg-[#902727] checked:border-[#902727] relative cursor-pointer"
                        />
                        <label
                           for="radio-phone"
                           class="flex items-center cursor-pointer text-gray-500 text-base font-normal leading-6 ml-2"
                        >
                           Teléfono
                        </label>
                     </div>
                  </div>
                  <div class="error-message text-red-500 text-sm mt-2 hidden"></div>
               </div>

               <div class="relative">
                  <textarea
                     name="message"
                     class="w-full h-32 text-gray-600 placeholder-gray-400 bg-transparent text-lg shadow-sm font-normal leading-7 rounded-sm border border-gray-200 focus:outline-none focus:border-[#902727] p-4 mb-2 transition-all duration-300"
                     placeholder="Mensaje"
                     required
                  ></textarea>
                  <div class="error-message text-red-500 text-sm mb-6 hidden"></div>
               </div>

               <button
                  type="submit"
                  class="cursor-pointer w-full h-12 text-white text-base font-semibold leading-6 rounded-sm transition-all duration-700 hover:bg-[#802727] bg-[#902727] shadow-sm"
                  >Enviar</button
               >
               <div id="formMessage" class="mt-4 text-center hidden"></div>
            </form>
         </div>
      </div>
   </div>
</section>

<script>
   document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("contactForm");
      const formMessage = document.getElementById("formMessage");

      form?.addEventListener("submit", async (e) => {
         e.preventDefault();

         const formData = new FormData(e.target as HTMLFormElement);

         try {
            formMessage!.textContent = "Enviando mensaje...";
            formMessage!.classList.remove("hidden", "text-red-500", "text-green-500");
            formMessage!.classList.add("text-gray-500");

            const response = await fetch("sendmail.php", {
               method: "POST",
               body: formData
            });

            const result = await response.json();

            if (result.success) {
               formMessage!.textContent = "¡Mensaje enviado con éxito!";
               formMessage!.classList.remove("hidden", "text-red-500", "text-gray-500");
               formMessage!.classList.add("text-green-500");
               (e.target as HTMLFormElement).reset();
            } else {
               throw new Error(result.error || "Error al enviar el mensaje");
            }
         } catch (error: any) {
            console.error('Error completo:', error);
            let errorMessage = "Error al enviar el mensaje. Por favor, intente nuevamente.";
            
            if (error.message) {
               errorMessage = `Error: ${error.message}`;
            }
            
            formMessage!.textContent = errorMessage;
            formMessage!.classList.remove("hidden", "text-green-500", "text-gray-500");
            formMessage!.classList.add("text-red-500");
         }

         formMessage!.classList.remove("hidden");
      });
   });
</script>

<style>
   input[type="radio"]:checked::after {
      content: "\f00c";
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      position: absolute;
      color: white;
      font-size: 12px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
   }

   input:focus,
   textarea:focus {
      border-color: #902727;
   }
</style>
